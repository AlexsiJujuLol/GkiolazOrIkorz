-- Load Library for UI
local Library = loadstring(game:HttpGet('https://raw.githubusercontent.com/LuauCloud/Byte/refs/heads/main/Utils/Library.lua'))()

-- Create the main window
local Library_Window = Library.Add_Window('Blade Ball Auto Parry')

-- Create a Tab for "Blade Ball"
local BladeBall_Tab = Library_Window.Create_Tab({
    name = 'Blade Ball',
    icon = 'rbxassetid://' -- Add your icon if necessary
})

-- Create a Section for the "Blade Ball" Tab
local BladeBall_Section = BladeBall_Tab.Create_Section()

-- Auto Parry Variables
local auto_parry_enabled = false
local auto_parry_distance = 10
local spam_speed = 0.5
local Balls = game:GetService("Workspace"):WaitForChild("Balls")
local Camera = game.Workspace.CurrentCamera

-- Trigger Parry Action
local function Parry()
    local ParryRemote = game.ReplicatedStorage:FindFirstChild("ParryButtonPress")
    if ParryRemote then
        ParryRemote:Fire()
    else
        warn("[Auto Parry] ParryButtonPress remote not found!")
    end
end

-- Auto Parry Logic
local function AutoParry()
    while auto_parry_enabled do
        for _, ball in ipairs(Balls:GetChildren()) do
            if ball:IsA("BasePart") and ball:GetAttribute("realBall") then
                local distance = (ball.Position - Camera.CFrame.Position).Magnitude
                if distance <= auto_parry_distance then
                    Parry()
                    task.wait(spam_speed) -- Cooldown between parries
                    break
                end
            end
        end
        task.wait(0.05) -- Frequent ball detection without lag
    end
end

-- UI: Auto Parry Toggle
BladeBall_Section.Create_Toggle({
    name = 'Enable Auto Parry',
    flag = 'BladeBall_Enable_Auto_Parry',
    callback = function(state)
        auto_parry_enabled = state
        if auto_parry_enabled then
            print('[Auto Parry] Enabled')
            task.spawn(AutoParry)
        else
            print('[Auto Parry] Disabled')
        end
    end
})

-- UI: Adjust Parry Distance
BladeBall_Section.Create_Slider({
    name = 'Parry Distance',
    flag = 'BladeBall_Parry_Distance',
    min = 1,
    max = 50,
    default = 10,
    callback = function(value)
        auto_parry_distance = value
        print('[Auto Parry] Distance set to:', value)
    end
})

-- UI: Adjust Spam Speed
BladeBall_Section.Create_Slider({
    name = 'Spam Speed',
    flag = 'BladeBall_Spam_Speed',
    min = 0.1,
    max = 1,
    default = 0.5,
    callback = function(value)
        spam_speed = value
        print('[Auto Parry] Spam Speed set to:', value)
    end
})
